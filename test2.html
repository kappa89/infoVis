<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <title>Infovis Project - Marco Cappello 418680</title>
  <script type='text/javascript' src="script/d3.min.js"></script>

</head>
<body>
  <h2>Progetto InfoVis - Marco Cappello 418680</h2>
  <h3>Disegna 30 quadrifogli (Ã¨ sufficiente la silhouette) che si si muovono allontanandosi dalla posizione corrente del mouse (le sovrapposizioni sono permesse). Quando una figurella arriva a pochi millimetri dal bordo del disegno scompare e ricompare vicino alla posizione corrente del mouse.</h3>

  <script>
        var width = 640,
            height = 480;

        var radius = 20;
        var treshold = 5;
        
        function getRandomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }

        var jsonCircles = [{ "x_axis": getRandomInt(radius, width-radius),
                             "y_axis": getRandomInt(radius, height-radius),
                             "radius": 20,
                             "color" : "red"
                            }];

        var svg = d3.select("body").append("svg")
                                    .attr("width", width)
                                    .attr("height", height);
                                    //add border

        var circles = svg.selectAll("circle")
                                    .data(jsonCircles)
                                    .enter()
                                    .append("circle")
                                    .on('mouseover', ciccio);
                                    //.on("mouseover", mouseover(d));

        function ciccio(d) { 
            var mousePosition = d3.mouse(this);
            
            d3.select(this).attr('cx', (cx + mousePosition[0]))
                           .attr('cy', (cy + mousePosition[1]));
        }
        
        //function mouseover(d){d3.select(this).attr('cx', 10);}
        /*function moveX(d){
            var obj = d3.select(this);
            var tmpX = d3.transform(obj.attr("transform")).translate[0];
            var dist = Math.abs(mousePosition[0] - tmpX);
            if(dist > treshold){
                if(mousePosition[0] - d.x_axis < 0){
                    d3.select(this).attr('cx', d.x_axis + dist);
                }
                else{   
                    d3.select(this).attr('cx', d.x_axis - dist);
                    }
            }
        }*/

        var circleAttributes = circles
                        .attr("cx", function (d) { return d.x_axis; })
                        .attr("cy", function (d) { return d.y_axis; })
                        .attr("r", function (d) { return d.radius; })
                        .style("fill", function(d) { return d.color; })
                        .on();

   </script>
</body>